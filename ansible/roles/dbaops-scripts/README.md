# dbaops-scripts
A role to install scripts utilised by the DBAOps team and, optionally, configure cron schedules to execute the scripts as desired.

## Role Variables

| Variables                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Type   |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|
| dbaops_scripts_install_dir       | Defines the remote directory that the defined scripts will be copied into                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | string |
| dbaops_scripts_default_owner     | The system owner for the copied scripts if no override is provided                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | string |
| dbaops_scripts_default_group     | The group ownership for the copied scripts if no override is provided                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | string |
| dbaops_scripts_default_cron_user | The user that any defined cron schedules will execute as if no override is provided                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | string |
| dbaops_scripts                   | A hash that defines the name of the script to be copied to the remote host along with any additional, optional, supporting options and overrides<br>`script_name`: The name of the script to be copied, must be present in the role's `files/` directory<br>`owner`: Overrides the system owner of the script when copied. Defaults to `dbaops_scripts_default_owner` if not set<br>`group`: Overrides the group ownership of the script when copied. Defaults to `dbaops_scripts_default_group` if not set<br>`cron_enable`: Defines whether a cron schedule is created (true) or not (false). Defaults to `false` if not set - all other `cron_` options are ignored if set to `false`<br>`cron_arguments`: Additional arguments that will be appended to the resulting cron job. Defaults to `''` if not set<br>`cron_user`: Defines the user the cron schedule will be executed as. Defaults to `dbaops_scripts_default_cron_user` if not set<br>`cron_minute`: Cron-compatible minute expression. Defaults to `0` if not set<br>`cron_hour`: Cron-compatible hour expression. Defaults to `0` if not set<br>`cron_day`: Cron-compatible day-of-the-month expression. Defaults to `*` if not set<br>`cron_month`: Cron-compatible month expression. Defaults to `*` if not set<br>`cron_weekday`: Cron-compatible weekday expression. Defaults to `*` if not set |        |


### Variables Example

```yaml
dbaops_scripts_install_dir: "/home/oracle/scripts"
dbaops_scripts_default_owner: "oracle"
dbaops_scripts_default_group: "dba"
dbaops_scripts_default_cron_user: "oracle"

dbaops_scripts:
  - script_name: "FirstScript.sh"
  - script_name: "SecondScript.sh"
    owner: root
    group: root
    cron_enable: true
    cron_user: root
    cron_minute: "1"
    cron_hour: "*/6"
  - script_name: "ThirdScript.sh"
  
```

## Dependencies

None
